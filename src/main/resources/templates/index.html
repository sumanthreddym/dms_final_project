<!doctype html>
<html>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <title>Sumanth Health Insurance</title>
  <link href='https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css' rel='stylesheet'>
  <link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.css' rel='stylesheet'>
  <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="#">Sumanth Health Insurance</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
    <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
      <li class="nav-item active">
        <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">About Us</a>
      </li>
      <li class="nav-item">
        <a class="nav-link " href="#">Contact Us</a>
      </li>
    </ul>
  </div>
</nav>
<div oncontextmenu='return false' class='snippet-body'>
  <div class="container-fluid">
    <div class="row justify-content-center">
      <div class="col-11 col-sm-9 col-md-7 col-lg-6 col-xl-5 text-center p-0 mt-3 mb-2">
        <div class="card px-0 pt-4 pb-0 mt-3 mb-3">
          <h2 id="heading">Get Health Insurance Quote</h2>
          <h6>If you want to explore the best health insurance plans offered by some amazing companies, you are at the right place!</h6>
          <p>Fill all the fields below to go to the next step</p>
          <form id="msform">
            <!-- progressbar -->
            <ul id="progressbar">
              <li class="active" id="account"><strong>General</strong></li>
              <li id="personal"><strong>Personal</strong></li>
              <li id="confirm"><strong>Finish</strong></li>
            </ul>
            <div class="progress">
              <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
            </div> <br> <!-- fieldsets -->
            <fieldset>
              <div class="form-card">
                <div class="row">
                  <div class="col-7">
                    <h2 class="fs-title">General Information:</h2>
                  </div>
                  <div class="col-5">
                    <h2 class="steps">Step 1 - 3</h2>
                  </div>
                </div>
                <div class="form-group">
                  <label class="fieldlabels">Which state do you live in?: *</label>
                  <select class="form-control" id="state" name="state" placeholder="State" required="true">
                    <option>NY</option>
                    <option>PA</option>
                    <option>WA</option>
                    <option>CA</option>
                    <option>NJ</option>
                  </select>
                </div>
                <label class="fieldlabels">What is your zipcode?: *</label> <input type="text" name="zip_code" placeholder="Zip Code"required="true" />
                <div class="form-group">
                  <label class="fieldlabels">Gender: *</label>
                  <select class="form-control" id="gender" name="gender" placeholder="Gender" required="true">
                    <option>Male</option>
                    <option>Female</option>
                    <option>Don't want to identify</option>
                  </select>
                </div>
                <label class="fieldlabels">Date of birth(MM/DD/YYYY): *</label> <input type="date" name="dob" placeholder="Date of birth" required="true"/>

                <div class="form-group">
                  <label class="fieldlabels">Do you use Tobacco?: *</label>
                  <select class="form-control" id="is_tobacco_user" name="is_tobacco_user" placeholder="Do you use Tobacco" required="true">
                    <option>Yes</option>
                    <option>No</option>
                  </select>
                </div>
                <label class="fieldlabels">How many dependents?: *</label> <input type="text" name="number_of_dependents" placeholder="Number of dependents" required="true"/>
                <div class="form-group">
                  <label class="fieldlabels">Which Metal Level do you prefer?: *</label>
                  <select class="form-control" id="metal_level" name="metal_level" placeholder="Metal Level" required="true">
                    <option>Gold</option>
                    <option>Silver</option>
                    <option>Platinum</option>
                    <option>Bronze</option>
                  </select>
                </div>

              </div> <input type="button" name="next" class="next action-button" value="Next" />
            </fieldset>
            <fieldset>
              <div class="form-card">
                <div class="row">
                  <div class="col-7">
                    <h2 class="fs-title">Personal Information:</h2>
                  </div>
                  <div class="col-5">
                    <h2 class="steps">Step 2 - 3</h2>
                  </div>
                </div>
                <label class="fieldlabels">First Name: *</label> <input type="text" name="first_name" placeholder="First Name" value=""/>
                <label class="fieldlabels">Last Name: *</label> <input type="text" name="last_name" placeholder="Last Name" />
                <label class="fieldlabels">Contact No.: *</label> <input type="text" name="phone_number" placeholder="Contact No." />
                <label class="fieldlabels">SSN: *</label> <input type="text" name="ssn" placeholder="SSN" />
                <label class="fieldlabels">Email Address: *</label> <input type="email" name="email" placeholder="Email Address" />
              </div>
              <input type="button" name="next" class="next action-button" value="Next" id="get-quotes-button"/>
              <input type="button" name="previous" class="previous action-button-previous" value="Previous" />
            </fieldset>
            <fieldset>
              <div class="form-card">
                <div class="row">
                  <div class="col-7">
                    <h2 class="fs-title">Finish:</h2>
                  </div>
                  <div class="col-5">
                    <h2 class="steps">Step 3 - 3</h2>
                  </div>
                </div> <br><br>
                <h2 class="purple-text text-center"><strong>SUCCESS !</strong></h2> <br>
                <div class="row justify-content-center">
                  <div class="col-3"> <img src="https://i.imgur.com/GwStPmg.png" class="fit-image"> </div>
                </div> <br><br>
                <div class="row justify-content-center">
                  <div class="col-7 text-center">
                    <h5 class="purple-text text-center">We recommend the following insurance plans</h5>
                  </div>
                </div>
                <div id="quote-container">
                </div>
                <div>
                  <h3>Our support associate will call you to help you with making the best choice.</h3>
                  <p>If you need any assistance, call us at <b>6465759252</b></p>
                </div>
              </div>
            </fieldset>
          </form>
          <div>
            <button type="button" name="offer" class="btn btn-primary offer action-button-offer" data-toggle="modal" data-target="#exampleModal">Click here to check if you are eligible for offer!</button>
          </div>
        </div>
        <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Want a discount?</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <div>
                  <p>Please fill out the following form to see if you are eligible for the offer.</p>
                  <p>Note: The data that you provide will be used by our machine learning model to check if yo qualify for an offer.
                    By clicking on "Check Eligibility" button below, you agree to our data usage policy.</p>
                </div>
                <div>
                  <form id="disease-prediction-form">
                    <fieldset>
                      <div class="form-card">
                        <div class="form-group">
                          <div>
                            <label class="fieldlabels">Age: *</label> <input type="text" name="age" placeholder="Age" required="true"/>
                          </div>
                          <div>
                            <label class="fieldlabels">Blood Pressure: *</label> <input type="text" name="bloodPressure" placeholder="bloodPressure" required="true"/>
                          </div>
                          <div>
                            <label class="fieldlabels">Specific Gravity: *</label>
                            <select class="form-control" id="specificGravity" name="specificGravity" placeholder="specificGravity" required="true">
                              <option value="1.005">1.005</option>
                              <option value="1.010">1.010</option>
                              <option value="1.015">1.015</option>
                              <option value="1.020">1.020</option>
                              <option value="1.025">1.025</option>
                            </select>
                          </div>
                          <div>
                            <label class="fieldlabels">Albumin: *</label>
                            <select class="form-control" id="albumin" name="albumin" placeholder="albumin" required="true">
                              <option value="0">0</option>
                              <option value="1">1</option>
                              <option value="2">2</option>
                              <option value="3">3</option>
                              <option value="4">4</option>
                              <option value="5">5</option>
                            </select>
                          </div>
                          <div>
                            <label class="fieldlabels">Sugar: *</label>
                            <select class="form-control" id="sugar" name="sugar" placeholder="sugar" required="true">
                              <option value="0">0</option>
                              <option value="1">1</option>
                              <option value="2">2</option>
                              <option value="3">3</option>
                              <option value="4">4</option>
                              <option value="5">5</option>
                            </select>
                          </div>
                          <div>
                            <label class="fieldlabels">Red Blood Cells: *</label>
                            <select class="form-control" id="redBloodCells" name="redBloodCells" placeholder="redBloodCells" required="true">
                              <option value="1">normal</option>
                              <option value="0">abnormal</option>
                            </select>
                          </div>
                          <div>
                            <label class="fieldlabels">Pus Cell: *</label>
                            <select class="form-control" id="pusCell" name="pusCell" placeholder="pusCell" required="true">
                              <option value="1">normal</option>
                              <option value="0">abnormal</option>
                            </select>
                          </div>
                          <div>
                            <label class="fieldlabels">Pus Cell Clumps: *</label>
                            <select class="form-control" id="pusCellClumps" name="pusCellClumps" placeholder="pusCellClumps" required="true">
                              <option value="1">normal</option>
                              <option value="0">abnormal</option>
                            </select>
                          </div>
                          <div>
                            <label class="fieldlabels">Bacteria: *</label>
                            <select class="form-control" id="bacteria" name="bacteria" placeholder="bacteria" required="true">
                              <option value="1">present</option>
                              <option value="0">Not present</option>
                            </select>
                          </div>
                          <div>
                            <label class="fieldlabels">Blood Glucose Random: *</label> <input type="text" name="bloodGlucoseRandom" placeholder="bloodGlucoseRandom" required="true"/>
                          </div>
                          <div>
                            <label class="fieldlabels">Blood Urea: *</label> <input type="text" name="bloodUrea" placeholder="bloodUrea" required="true"/>
                          </div>
                          <div>
                            <label class="fieldlabels">Serum Creatinine: *</label> <input type="text" name="serumCreatinine" placeholder="serumCreatinine" required="true"/>
                          </div>
                          <div>
                            <label class="fieldlabels">Sodium: *</label> <input type="text" name="sodium" placeholder="sodium" required="true"/>
                          </div>
                          <div>
                            <label class="fieldlabels">Potassium: *</label> <input type="text" name="potassium" placeholder="potassium" required="true"/>
                          </div>
                          <div>
                            <label class="fieldlabels">Haemoglobin: *</label> <input type="text" name="haemoglobin" placeholder="haemoglobin" required="true"/>
                          </div>
                          <div>
                            <label class="fieldlabels">Packed Cell Volume: *</label> <input type="text" name="packedCellVolume" placeholder="packedCellVolume" required="true"/>
                          </div>
                          <div>
                            <label class="fieldlabels">White Blood Cell Count: *</label> <input type="text" name="whiteBloodCellCount" placeholder="whiteBloodCellCount" required="true"/>
                          </div>
                          <div>
                            <label class="fieldlabels">Red Blood Cell Count: *</label> <input type="text" name="redBloodCellCount" placeholder="redBloodCellCount" required="true"/>
                          </div>
                          <div>
                            <label class="fieldlabels">Hypertension: *</label>
                            <select class="form-control" id="hypertension" name="hypertension" placeholder="hypertension" required="true">
                              <option value="1">Yes</option>
                              <option value="0">No</option>
                            </select>
                          </div>
                          <div>
                            <label class="fieldlabels">Diabetes Mellitus: *</label>
                            <select class="form-control" id="diabetesMellitus" name="diabetesMellitus" placeholder="diabetesMellitus" required="true">
                              <option value="1">Yes</option>
                              <option value="0">No</option>
                            </select>
                          </div>
                          <div>
                            <label class="fieldlabels">Coronary Artery Disease: *</label>
                            <select class="form-control" id="coronaryArteryDisease" name="coronaryArteryDisease" placeholder="coronaryArteryDisease" required="true">
                              <option value="1">Yes</option>
                              <option value="0">No</option>
                            </select>
                          </div>
                          <div>
                            <label class="fieldlabels">Appetite: *</label>
                            <select class="form-control" id="appetite" name="appetite" placeholder="appetite" required="true">
                              <option value="1">Good</option>
                              <option value="0">Poor</option>
                            </select>
                          </div>
                          <div>
                            <label class="fieldlabels">pedal Edema: *</label>
                            <select class="form-control" id="pedalEdema" name="pedalEdema" placeholder="pedalEdema" required="true">
                              <option value="1">Yes</option>
                              <option value="0">No</option>
                            </select>
                          </div>
                          <div>
                            <label class="fieldlabels">Anemia: *</label>
                            <select class="form-control" id="anemia" name="anemia" placeholder="anemia" required="true">
                              <option value="1">Yes</option>
                              <option value="0">No</option>
                            </select>
                          </div>
                        </div>
                      </div>
                    </fieldset>
                  </form>
                </div>
                <div id="prediction-output">
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="check-eligibility">Check Eligibility</button>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<script type='text/javascript' src='https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js'></script>
<script type='text/javascript'>$(document).ready(function(){

  var current_fs, next_fs, previous_fs; //fieldsets
  var opacity;
  var current = 1;
  var steps = $("fieldset").length;

  $('#check-eligibility').click(function(){
    let predictionJson={
      'age': parseInt($('[name=age]').val()), 'bloodPressure':parseInt($('[name=bloodPressure]').val()), 'specificGravity':parseFloat($('#specificGravity').find(":selected").val()), 'albumin':parseInt($('#albumin').find(":selected").val()), 'sugar':parseInt($('#sugar').find(":selected").val()),
      'redBloodCells':parseFloat($('#redBloodCells').find(":selected").val()), 'pusCell':parseFloat($('#pusCell').find(":selected").val()), 'pusCellClumps':parseFloat($('#pusCellClumps').find(":selected").val()), 'bacteria':parseFloat($('#bacteria').find(":selected").val()),
      'bloodGlucoseRandom':parseFloat($('[name=bloodGlucoseRandom]').val()), 'bloodUrea':parseFloat($('[name=bloodUrea]').val()), 'serumCreatinine':parseFloat($('[name=serumCreatinine]').val()), 'sodium':parseFloat($('[name=sodium]').val()),
      'potassium':parseFloat($('[name=potassium]').val()), 'haemoglobin':parseFloat($('[name=haemoglobin]').val()), 'packedCellVolume':parseFloat($('[name=packedCellVolume]').val()),
      'whiteBloodCellCount':parseFloat($('[name=whiteBloodCellCount]').val()), 'redBloodCellCount':parseFloat($('[name=redBloodCellCount]').val()), 'hypertension':parseInt($('#hypertension').find(":selected").val()),
      'diabetesMellitus':parseInt($('#diabetesMellitus').find(":selected").val()), 'coronaryArteryDisease':parseInt($('#coronaryArteryDisease').find(":selected").val()), 'appetite':parseInt($('#appetite').find(":selected").val()),
      'pedalEdema':parseInt($('#pedalEdema').find(":selected").val()), 'anemia':parseInt($('#anemia').find(":selected").val())
    };
    console.log(predictionJson);
    $.ajax({
      type: 'post',
      url: 'prediction',
      data: JSON.stringify(predictionJson),
      contentType: "application/json; charset=utf-8",
      traditional: true,
      success: function (data) {
        let offer_eligible_string = '<h2>Thanks for your patience. Congratulations! Our machine learning model says that you are eligible to receive discount. You can receive a discount of 20% on the original cost of insurance.</h2>';
        console.log(data);
        console.log(data == '0');
        if(data == '0'){
          offer_eligible_string = '<h2>Sorry, our Machine Learning model thinks you are not eligible for the offer.</h2>';
        }
        $('#prediction-output').html(offer_eligible_string);
      }
    });
  });

  setProgressBar(current);

  $(".next").click(function(){

    var customer = {
        "customerSsn":$('[name=ssn]').val(),
        "firstName": $('[name=first_name]').val(),
        "middleInitial":"",
        "lastName":$('[name=last_name]').val(),
        "suffix":"",
        "dateOfBirth":$('[name=dob]').val(),
        "salutation":"",
        "emailAddress":$('[name=email]').val(),
        "gender":$('[name=gender]').val()
      };

    var quote_request = [
      {
        "quoteRequestId":"1",
        "numberOfPeopleOnPlan":1,
        "bmi":20.0,
        "isSmoker":0,
        "maxPrice":2000.0,
        "isSaleComplete":0,
        "quoteRequestProductQuotesByQuoteRequestId":[

        ],
        "customerByCustomerSsn":customer
      }
    ];
    if($(this).attr('id') == 'get-quotes-button'){
      $.ajax({
        type: 'post',
        url: 'customers',
        data: JSON.stringify(customer),
        contentType: "application/json; charset=utf-8",
        traditional: true,
        success: function (data) {
          $.get( 'quote_request_product_quotes/123456789', function( quote_request_results ) {
            let quote_request_html = "";
            console.log(quote_request_results);
            for (let i = 0; i < quote_request_results.length; i++) {
              let quote_request_result = quote_request_results[i];
              quote_request_html += '<div class="card plan-display-card mb-3">\n' +
                      '                    <div class="card-body">\n' +
                      '                      <h5 class="card-title">' + quote_request_result['product']['planName'] + '</h5>\n' +
                      '                      <p class="card-text">' + quote_request_result['product']['description'] + '</p>\n' +
                      '                      <h6 class="card-text">Price: ' + quote_request_result['charges'] + '</h6>\n' +
                      '                      <p class="card-text"><small class="text-muted"><a href="' + quote_request_result['product']['networkUrl'] + '">Newtork Coverage</a></small></p>\n' +
                      '                      <p class="card-text"><small class="text-muted"><a href="' + quote_request_result['product']['planBrochureUrl'] + '">See plan brochure</a></small></p>\n' +
                      '                      <p class="card-text"><small class="text-muted"><a href="' + quote_request_result['product']['benefitsSumaryUrl'] + '">Read about the Benefits offered</a></small></p>\n' +
                      '                      <p class="card-text"><small class="text-muted"><a href="' + quote_request_result['product']['drugFormulaUrl'] + '">Visit Drug Formula</a></small></p>\n' +
                      '                  </div>\n' +
                      '                  </div>';
            }
            $('#quote-container').html(quote_request_html);
          });
        }
      });
    }

    current_fs = $(this).parent();
    next_fs = $(this).parent().next();

    $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");

    next_fs.show();
    current_fs.animate({opacity: 0}, {
      step: function(now) {
        opacity = 1 - now;

        current_fs.css({
          'display': 'none',
          'position': 'relative'
        });
        next_fs.css({'opacity': opacity});
      },
      duration: 500
    });
    setProgressBar(++current);
  });

  $(".previous").click(function(){

    current_fs = $(this).parent();
    previous_fs = $(this).parent().prev();

    $("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");

    previous_fs.show();

    current_fs.animate({opacity: 0}, {
      step: function(now) {
        opacity = 1 - now;

        current_fs.css({
          'display': 'none',
          'position': 'relative'
        });
        previous_fs.css({'opacity': opacity});
      },
      duration: 500
    });
    setProgressBar(--current);
  });

  function setProgressBar(curStep){
    var percent = parseFloat(100 / steps) * curStep;
    percent = percent.toFixed();
    $(".progress-bar")
            .css("width",percent+"%")
  }

  $(".submit").click(function(){
    return false;
  })

});</script>
</body>
</html>